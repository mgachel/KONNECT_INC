{% extends 'html/base.html' %}

{% block content %}
    <header class="hero">
        <h1>Welcome to KONNECT INC</h1>
        <p>Your one-stop shop for the latest products.</p>
        <button class="shop-now-btn" onclick="document.querySelector('.categories').scrollIntoView({behavior: 'smooth'})">Shop Now</button>
    </header>

    <section class="categories">
        <h2>Product Categories</h2>
        <div class="category-tabs">
            {% for category in categories %}
                <button class="category-tab {% if forloop.first %}active{% endif %}" 
                    data-category="{{ category.id }}">
                    {{ category.name }}
                </button>
            {% endfor %}
        </div>
        <div class= "products-container">
            {% for category in categories %}
            <div class="category-products {% if forloop.first %}active{% endif %}" 
                 data-category="{{ category.id }}">
                <div class="products-grid">
                    {% for product in category.products_set.all %}
                    <div class="product-card" data-product-id="{{ product.id }}">
                        <div class="product-media">
                            <img src="{{ product.product_image.url }}" alt="{{ product.product_name }}">
                            {% if product.product_video %}
                            <video class="product-video" data-source="{{ product.product_video.url }}" muted playsinline preload="none"></video>
                            <button class="play-video-btn" title="Play video">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white"><path d="M8 5v14l11-7z"/></svg>
                            </button>
                            <a class="download-video-btn" href="{{ product.product_video.url }}" download title="Download video">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="white"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
                            </a>
                            {% endif %}
                        </div>
                        <div class="product-info"> 
                            <h4>{{ product.product_name }}</h4>
                            <p class="price">â‚µ{{ product.product_price }}</p>
                            <p class="stock">{{ product.product_stock }} items left</p>
                            <button class="add-to-cart-btn">Add to Cart</button>
                        </div>
                    </div>
                    {% empty %}
                    <p class="no-products">No products in this category yet.</p>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

{% endblock %}
